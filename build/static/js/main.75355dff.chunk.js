(this.webpackJsonpthe_phonebook=this.webpackJsonpthe_phonebook||[]).push([[0],{14:function(e,t,n){e.exports=n.p+"static/media/symbol-defs.9622dd4d.svg"},15:function(e,t,n){e.exports=n(39)},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(13),l=n.n(c),o=n(2),u=n(3),i=n.n(u),m="/api/persons",s=function(){return i.a.get(m).then((function(e){return e.data}))},d=function(e){return i.a.post(m,e).then((function(e){return e.data}))},f=function(e){return i.a.delete("".concat(m,"/").concat(e)).then((function(e){return e.data}))},h=function(e,t){return i.a.put("".concat(m,"/").concat(e),t).then((function(e){return e.data}))},b=n(14),p=n.n(b),E=(n(37),function(e){var t=e.message;return t?r.a.createElement("div",{className:"notification"},t):null}),v=function(e){var t=e.handleSubmit,n=e.nameState,a=e.handleOnChangeName,c=e.numberState,l=e.handleOnChangeNumber,o=e.notification;return r.a.createElement("form",{id:"testerino",onSubmit:t},r.a.createElement("div",{className:"formContainer"},r.a.createElement("div",{className:"name_container"},r.a.createElement("label",{htmlFor:"name"},"Name:"),r.a.createElement("input",{name:"name",value:n,placeholder:"introduce new name",onChange:a,className:"input"})),r.a.createElement("div",{className:"phone_input_container"},r.a.createElement("label",{htmlFor:"phoneNumber"},"Phone number:"),r.a.createElement("input",{name:"phoneNumber",value:c,placeholder:"10 digits number",onChange:l,className:"input"})),r.a.createElement("button",{className:"btn mt-small",type:"submit"},"Add"),r.a.createElement(E,{message:o})))},g=function(e){var t=e.handleChange,n=e.value;return r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"filter"},"Filter:"),r.a.createElement("input",{value:n,onChange:t,name:"filter",type:"text",className:"input",placeholder:"By name or number"}))},N=function(e){var t=e.name,n=e.number,a=e.id;return r.a.createElement("tr",{className:"".concat(a," data-row")},r.a.createElement("td",{className:"data-field"},t),r.a.createElement("td",{className:"data-field"},n),r.a.createElement("td",{className:"delete-field"},r.a.createElement("div",{className:"icon-container"},r.a.createElement("div",{className:"filler"}," "),r.a.createElement("svg",{className:"icon-trash"},r.a.createElement("use",{xlinkHref:"".concat(p.a,"#icon-bin")})))))},S=function(e){var t=e.data,n=e.filter,a=void 0!==n&&n;return a?t.map((function(e){return e.name.toLowerCase().includes(a.toLowerCase())||e.number.toString().includes(a.toString())?r.a.createElement(N,{key:e.name,name:e.name,number:e.number,id:e.id}):null})):t?(console.log(t,t.length,typeof t,Boolean(t.length)),t.map((function(e){return r.a.createElement(N,{key:e.name,name:e.name,number:e.number,id:e.id})}))):null},y=function(){var e=Object(a.useState)([]),t=Object(o.a)(e,2),n=t[0],c=t[1],l=Object(a.useState)(""),u=Object(o.a)(l,2),i=u[0],m=u[1],b=Object(a.useState)(""),p=Object(o.a)(b,2),E=p[0],N=p[1],y=Object(a.useState)(""),O=Object(o.a)(y,2),C=O[0],j=O[1],k=Object(a.useState)(""),w=Object(o.a)(k,2),F=w[0],L=w[1];Object(a.useEffect)((function(){s().then((function(e){c(e.persons)}))}),[]);return r.a.createElement("div",null,r.a.createElement("h1",null,"Phonebook"),r.a.createElement(v,{nameState:i,handleOnChangeName:function(e){m(e.target.value)},numberState:E,handleOnChangeNumber:function(e){N(e.target.value)},handleSubmit:function(e){e.preventDefault();var t={name:i,number:parseInt(E)},a=function(){return m(""),N(""),1},r=function(){setTimeout((function(){L("")}),5e3)};if(/^[0-9]{10}$/.test(E)){var l=function(){var e=[];return n.map((function(t){return e+=t.name===i})),e.includes(!0)?1:(n.map((function(t){return e+=t.number.toString()===E})),e.includes(!0)?2:void 0)};if(1!==l())2!==l()?d(t).then((function(e){c(n.concat(e)),a(),L("New contact added successfully"),document.querySelector(".notification").classList.add("success"),r()})).catch((function(e){return console.log(e)})):alert("".concat(E," is already added to phonebook"));else{var o=n.filter((function(e){return e.name===i}))[0].id;window.confirm("".concat(i," is already added to phonebook, replace the old number with a new one?"))&&h(o,t).then((function(e){c(n.map((function(e){return e.id.toString()!==o.toString()?e:t}))),a()})).catch((function(e){L("Failed to update record because it has been deleted"),document.querySelector(".notification").classList.add("error"),r()}))}}else alert("Number must be only 10 digits and no special characters")},notification:F}),r.a.createElement("div",{className:"numbers"},r.a.createElement("h2",null,"Numbers"),r.a.createElement(g,{value:C,handleChange:function(e){j(e.target.value)}}),r.a.createElement("table",{onClick:function(e){var t=e.target.parentElement.parentElement.parentElement.classList[0];f(t).then((function(e){c(n.filter((function(e){return e.id.toString()!==t})))}))}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"tb-header"},"Name"),r.a.createElement("th",{className:"tb-header"},"Phone Number"))),r.a.createElement("tbody",null,r.a.createElement(S,{data:n,filter:C})))))};n(38);l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(y,null)),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.75355dff.chunk.js.map